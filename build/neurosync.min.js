!function(e,t){function i(e){return e!==t}function n(e){return!!(e&&e.constructor&&e.call&&e.apply)}function s(e){return n(e)&&e.prototype instanceof x}function a(e){return!!(e&&e.Model&&e.Database)}function r(e){return"string"==typeof e}function o(e){return"number"==typeof e&&!isNaN(e)}function d(e){return"boolean"==typeof e}function u(e){return e instanceof Date}function h(e){return e instanceof RegExp}function l(e){return e instanceof Array}function c(e){return null!==e&&"object"==typeof e}function f(e,t){return e instanceof Array?e:e.split(t)}function v(e){return!(e===t||null===e)}function g(e,t,i){for(var n=i||H,s=0,a=e.length;a>s;s++)if(n(e[s],t))return s;return!1}function E(){}function m(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function A(){return m()+m()+"-"+m()+"-"+m()+"-"+m()+"-"+m()+m()+m()}function R(e,t,i,n){if(r(t))return e[t]===i[n];for(var s=0;s<t.length;s++){var a=t[s],o=n[s];if(!C(e[a],i[o]))return!1}return!0}function p(e,t,i){S(i,t.prototype=e)}function S(e,t){for(var i in e)t[i]=e[i];return t}function $(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function b(e,i,n){for(var s in n){var a=n[s],r=i[s];if(!r&&a===t)throw s+" is a required option";v(r)?e[s]=r:e[s]=L(a)}e.options=i}function O(e){return 1===e.length?e.toUpperCase():e.charAt(1).toUpperCase()}function M(e){return e.replace(/(^.|_.)/g,O)}function N(e){return v(e)?a(e)?new e.Model:s(e)?new e:n(e)?e():L(e):e}function _(e,t,i){for(var n={},s=0;s<t.length;s++){var a=t[s];a in e&&(n[a]=i?L(e[a]):e[a])}return n}function y(e,t,i){if(r(t)){var n=e[t];return i?L(n):n}for(var s=[],a=0;a<t.length;a++){var o=t[a],n=e[o];s.push(i?L(n):n)}return s}function D(e){for(var t in e)"$"===t.charAt(0)&&delete e[t];return e}function L(e,i){if(null===e||e===t||"object"!=typeof e||n(e)||h(e))return e;if(l(e)){for(var s=[],a=0;a<e.length;a++)s.push(L(e[a]));return s}if(u(e))return new Date(e.getTime());var s={};for(var r in e)(i||"$"!==r.charAt(0))&&(s[r]=L(e[r]));return s}function T(e,t,i,n){for(var s={},a=0;a<i.length;a++){var r=i[a];n(e[r],t[r])||(s[r]=L(e[r]))}return s}function I(e){if(l(e)||r(e))return e.length;if(c(e)){var t=0;for(var i in e)t++;return t}return 0}function k(e){if(null===e||void 0===e||0===e)return!0;if(l(e)||r(e))return 0===e.length;if(u(e))return 0===e.getTime()||isNaN(e.getTime());if(c(e)){for(var t in e)return!1;return!0}return!1}function H(e,t){return e===t}function C(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var i=typeof e,s=typeof t;if(i!==s)return!1;var a=l(e),r=l(t);if(a!==r)return!1;if(a){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(!C(e[o],t[o]))return!1;return!0}if(u(e))return u(t)&&C(e.getTime(),t.getTime());if(h(e))return h(t)&&e.toString()===t.toString();if("object"===i){for(var d in e)if(!("$"===d.charAt(0)||n(e[d])||d in t&&C(e[d],t[d])))return!1;for(var d in t)if(!("$"===d.charAt(0)||n(t[d])||d in e))return!1;return!0}return!1}function V(e,t){return e===t?0:t>e?-1:1}function U(e,t,i){if(e==t)return 0;var n=v(e),s=v(t);return n!==s?n&&!i||s&&i?-1:1:(u(e)&&(e=e.getTime()),u(t)&&(t=t.getTime()),o(e)&&o(t)?V(e,t):l(e)&&l(t)?V(e.length,t.length):d(e)&&d(t)?e?-1:1:(e+"").localeCompare(t+""))}function F(e,t){if(n(e))return e;if(r(e))return"-"===e.charAt(0)?(e=e.substring(1),function(i,n){var s=v(i)?i[e]:i,a=v(n)?n[e]:n;return U(a,s,!t)}):function(i,n){var s=v(i)?i[e]:i,a=v(n)?n[e]:n;return U(s,a,t)};if(l(e)){for(var i=[],s=0;s<e.length;s++)i[s]=F(e[s],t);return function(e,t){for(var n=0,s=0;s<i.length&&0===n;s++)n=i[s](e,t);return n}}return null}function K(e,t,i){var s=n(i)?i:c(i)&&n(i.get)?i.get:E,a=c(i)&&n(i.set)?i.set:E;if(Object.defineProperty)Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s,set:a});else{var r=e.$init;e.$init=function(){r.apply(this,arguments);var e=this[t]=s.apply(this),i=function(){var i=this[t];i!==e?a.call(this,i):e=this[t]=s.apply(this)};this.$after(x.Events.Changes,i,this)}}}function P(e,t,i,s){var a={on:i?"$on":"on",once:i?"$once":"once",after:i?"$after":"after"},r=s||[];if(n(t))r.push({when:a.on,events:e,invoke:t});else if(l(t)&&2===t.length&&n(t[0]))r.push({when:a.on,events:e,invoke:t[0],context:t[1]});else if(c(t))for(var o in t)if(o in a){var d=t[o],u=a[o];n(d)?r.push({when:u,events:e,invoke:d}):l(d)&&2===d.length&&n(d[0])&&r.push({when:u,events:e,invoke:d[0],context:d[1]})}return r}function Y(e,t){for(var i=0;i<t.length;i++){var n=t[i];e[n.when](n.events,n.invoke,n.context)}}function w(e,t){function s(e,t,s,a,r){if(n(a)){var s=f(s," ");i(e[t])||(e[t]={});for(var o=0;o<s.length;o++)i(e[t][s[o]])||(e[t][s[o]]=[]),e[t][s[o]].push([a,r||e,0])}}function a(e,t,i){return s(this,"$$on",e,t,i),this}function r(e,t,i){return s(this,"$$once",e,t,i),this}function o(e,t,i){return s(this,"$$after",e,t,i),this}function d(e,t,i){if(e&&t in e)for(var n=e[t],s=n.length-1;s>=0;s--)n[s][v]===i&&n.splice(s,1)}function u(e,t){e&&t in e&&delete e[t]}function h(e,t){if(i(e)){var e=f(e," ");if(n(t))for(var s=0;s<e.length;s++)d(this.$$on,e[s],t),d(this.$$once,e[s],t),d(this.$$after,e[s],t);else for(var s=0;s<e.length;s++)u(this.$$on,e[s]),u(this.$$once,e[s]),u(this.$$after,e[s])}else u(this,"$$on"),u(this,"$$once"),u(this,"$$after");return this}function l(e,t,i,n){if(e&&t in e){for(var s=e[t],a=++m,r=0;r<s.length;r++){var o=s[r];o&&o[E]!==a&&(o[E]=a,o[v].apply(o[g],i),o!==s[r]&&(r=-1))}n&&delete e[t]}}function c(e,t){for(var e=f(e," "),i=0;i<e.length;i++){var n=e[i];l(this.$$on,n,t,!1),l(this.$$once,n,t,!0),l(this.$$after,n,t,!1)}return this}var v=0,g=1,E=2,m=0;t?(e.$on=a,e.$once=r,e.$after=o,e.$off=h,e.$trigger=c):(e.on=a,e.once=r,e.after=o,e.off=h,e.trigger=c)}function B(e){if(e.name in B.cache)return B.cache[e.name];var t=new G(e),i=new Function("return function "+t.className+"(props, exists) { this.$init( props, exists ) }")();if(i.prototype=new x(t),c(e.methods)&&S(e.methods,i.prototype),c(e.dynamic))for(var n in e.dynamic){var s=e.dynamic[n];K(i.prototype,n,s)}return t.model=i,t.init(),B.debug(B.Debugs.CREATION,t,e),i.Database=t,i.Model=i,i.all=function(){return t.getModels()},i.create=function(e){return t.create(e)},i.fetch=function(e){var i=t.buildKeyFromInput(e),n=t.getModel(i);return n||(n=t.buildObjectFromKey(i),c(e)&&n.$set(e)),n.$refresh(),n},i.boot=function(e){var t=new i(e);return t.$local=t.$toJSON(!1),t.$local.$saved=t.$saved=t.$toJSON(!0),t.$addOperation(te),t},B.cache[e.name]=i,B.cache[e.className]=i,B.trigger(B.Events.Initialized,[i]),i}function G(e){var t=G.Defaults;b(this,e,t);for(var i in e)i in t||(this[i]=e[i]);var n=this.key,s=this.fields;if(l(n))for(var a=n.length-1;a>=0;a--)g(s,n[a])===!1&&s.unshift(n[a]);else g(s,n)===!1&&s.unshift(n);if(this.models=new z,this.className=this.className||M(this.name),this.initialized=!1,this.pendingRefresh=!1,this.localLoaded=!1,this.remoteLoaded=!1,this.remoteOperations=0,this.afterOnline=!1,this.saveFields=L(s),this.rest=B.rest(this),this.store=B.store(this),this.live=B.live(this,this.handlePublish(this)),this.setComparator(this.comparator,this.comparatorNullsFirst),this.setRevision(this.revision),this.setToString(this.toString),this.databaseEvents=[],this.modelEvents=[],c(this.events))for(var r in this.events){var o=this.events[r],d=M(r),u=G.Events[d],h=x.Events[d];u&&P(u,o,!1,this.databaseEvents),h&&P(h,o,!0,this.modelEvents)}Y(this,this.databaseEvents),this.relations={},this.relationNames=[];for(var f in e)if(f in B.Relations){var v=B.Relations[f];if(v.prototype instanceof ne){var E=e[f];for(var m in E){var A=E[m],R=new v;R.init(this,m,A),R.save&&this.saveFields.push(m),this.relations[m]=R,this.relationNames.push(m)}}}}function x(e){this.$db=e}function z(){this.values=[],this.keys=[],this.indices={}}function J(e,t){this.interrupts=e,this.type=t}function j(e,t){this.reset(e,t)}function q(e,t){this.reset(e,t)}function Z(e,t){this.reset(e,t)}function Q(e,t){this.reset(e,t)}function W(e,t){this.reset(e,t)}function X(e,t){this.reset(e,t)}function ee(e,t){this.reset(e,t)}function te(e,t){this.reset(e,t)}function ie(e,t){this.reset(e,t)}function ne(){}function se(){this.type="belongsTo"}function ae(){this.type="hasMany"}function re(){this.type="hasManyThrough"}function oe(){this.type="hasOne"}B.Events={Initialized:"initialized",Online:"online",Offline:"offline"},B.cache={},B.get=function(t,i,s){function a(){var e=B.cache[t];e&&(i.call(o,e),B.off(B.Events.Initialized,a))}var r=B.cache[t],o=s||e;return n(i)&&(r?i.call(o,r):B.on(B.Events.Initialized,a)),r},w(B),B.debug=function(e,t){},B.Debugs={CREATION:0,REST:1,AUTO_REFRESH:73,REMOTE_UPDATE:2,REMOTE_CREATE:3,REMOTE_REMOVE:4,REMOTE_LOAD:5,REMOTE_LOAD_OFFLINE:6,REMOTE_LOAD_ERROR:7,REMOTE_LOAD_REMOVE:8,REMOTE_LOAD_RESUME:22,LOCAL_LOAD:9,LOCAL_RESUME_DELETE:10,LOCAL_RESUME_SAVE:11,LOCAL_LOAD_SAVED:12,REALTIME_SAVE:13,REALTIME_REMOVE:14,SAVE_VALUES:15,SAVE_PUBLISH:16,SAVE_CONFLICT:17,SAVE_UPDATE_FAIL:18,SAVE_ERROR:19,SAVE_OFFLINE:20,SAVE_RESUME:21,SAVE_REMOTE:25,SAVE_DELETED:40,SAVE_OLD_REVISION:48,SAVE_LOCAL:23,SAVE_LOCAL_ERROR:24,SAVE_LOCAL_DELETED:38,SAVE_LOCAL_BLOCKED:39,SAVE_REMOTE_DELETED:41,SAVE_REMOTE_BLOCKED:42,REMOVE_PUBLISH:26,REMOVE_LOCAL:27,REMOVE_MISSING:28,REMOVE_ERROR:29,REMOVE_OFFLINE:30,REMOVE_RESUME:31,REMOVE_REMOTE:32,REMOVE_CANCEL_SAVE:47,REMOVE_LOCAL:33,REMOVE_LOCAL_ERROR:34,REMOVE_LOCAL_BLOCKED:44,REMOVE_LOCAL_NONE:45,REMOVE_LOCAL_UNSAVED:46,REMOVE_REMOTE_BLOCKED:43,GET_LOCAL_SKIPPED:104,GET_LOCAL:105,GET_LOCAL_ERROR:106,GET_REMOTE:107,GET_REMOTE_ERROR:108,ONLINE:35,OFFLINE:36,PUBSUB_CREATED:37,HASONE_INIT:53,HASONE_NINJA_REMOVE:49,HASONE_NINJA_SAVE:50,HASONE_INITIAL_PULLED:51,HASONE_INITIAL:52,HASONE_CLEAR_MODEL:54,HASONE_SET_MODEL:55,HASONE_PRESAVE:56,HASONE_POSTREMOVE:57,HASONE_CLEAR_KEY:58,HASONE_UPDATE_KEY:59,HASONE_LOADED:60,BELONGSTO_INIT:61,BELONGSTO_NINJA_REMOVE:62,BELONGSTO_NINJA_SAVE:63,BELONGSTO_INITIAL_PULLED:64,BELONGSTO_INITIAL:65,BELONGSTO_CLEAR_MODEL:66,BELONGSTO_SET_MODEL:67,BELONGSTO_POSTREMOVE:69,BELONGSTO_CLEAR_KEY:70,BELONGSTO_UPDATE_KEY:71,BELONGSTO_LOADED:72,HASMANY_INIT:74,HASMANY_NINJA_REMOVE:75,HASMANY_NINJA_SAVE:76,HASMANY_INITIAL:77,HASMANY_INITIAL_PULLED:78,HASMANY_REMOVE:79,HASMANY_SORT:80,HASMANY_ADD:81,HASMANY_LAZY_LOAD:82,HASMANY_INITIAL_GRABBED:83,HASMANY_NINJA_ADD:84,HASMANY_AUTO_SAVE:85,HASMANY_PREREMOVE:86,HASMANY_POSTSAVE:87,HASMANYTHRU_INIT:88,HASMANYTHRU_NINJA_REMOVE:89,HASMANYTHRU_NINJA_SAVE:90,HASMANYTHRU_NINJA_THRU_REMOVE:91,HASMANYTHRU_INITIAL:92,HASMANYTHRU_INITIAL_PULLED:93,HASMANYTHRU_REMOVE:94,HASMANYTHRU_SORT:95,HASMANYTHRU_ADD:96,HASMANYTHRU_LAZY_LOAD:97,HASMANYTHRU_INITIAL_GRABBED:98,HASMANYTHRU_NINJA_ADD:99,HASMANYTHRU_AUTO_SAVE:100,HASMANYTHRU_PREREMOVE:101,HASMANYTHRU_POSTSAVE:102,HASMANYTHRU_THRU_ADD:103,HASMANYTHRU_THRU_REMOVE:68},B.rest=function(e){return{all:function(e,t){e([])},get:function(e,t,i){i(null,-1)},create:function(e,t,i,n){i({})},update:function(e,t,i,n){i({})},remove:function(e,t,i){t({})}}},B.store=function(e){return{put:function(e,t,i,n){i(e,t)},get:function(e,t,i){i(e,void 0)},remove:function(e,t,i){t(e,record)},all:function(e,t){e([],[])}}},B.live=function(e,t){return function(e){}},B.online=window.navigator.onLine!==!1,B.forceOffline=!1,B.setOnline=function(){B.online=!0,B.debug(B.Debugs.ONLINE),B.trigger(B.Events.Online)},B.setOffline=function(){B.online=!1,B.debug(B.Debugs.OFFLINE),B.trigger(B.Events.Offline)},B.listenToNetworkStatus=function(){window.addEventListener?(window.addEventListener(B.Events.Online,B.setOnline,!1),window.addEventListener(B.Events.Offline,B.setOffline,!1)):(document.body.ononline=B.setOnline,document.body.onoffline=B.setOffline)},B.checkNetworkStatus=function(){var e=window.navigator.onLine;B.forceOffline&&(e=!1),e===!0&&B.online===!1?B.setOnline():e===!1&&B.online===!0&&B.setOffline()},G.Events={NoLoad:"no-load",RemoteLoad:"remote-load",LocalLoad:"local-load",Updated:"updated",ModelAdded:"model-added",ModelUpdated:"model-updated",ModelRemoved:"model-removed",Loads:"no-load remote-load local-load"},G.Live={Save:"SAVE",Remove:"REMOVE"},B.Cache={None:"none",Pending:"pending",All:"all"},G.Defaults={name:t,className:null,key:"id",keySeparator:"/",fields:[],defaults:{},comparator:null,comparatorNullsFirst:null,revision:null,loadRelations:!0,loadRemote:!0,autoRefresh:!0,cache:B.Cache.All,fullSave:!1,fullPublish:!1,dynamic:!1,methods:!1,events:!1,encode:function(e){return e},decode:function(e){return e},toString:function(e){return e.$key()}},G.prototype={ready:function(e,t,i){function n(){a.off(G.Events.Loads,s)}function s(){i||n(),(!o||i)&&(e.call(r,a)===!1&&n(),o=!0)}var a=this,r=t||a,o=!1;return a.initialized?(e.call(r,a),o=!0):a.on(G.Events.Loads,s),o},grabModel:function(e,t,i,n){function s(){var i=a.parseModel(e,n!==!1);return i===!1||o||(o=!0,t.call(r,i)),null===i?!1:!0}var a=this,r=i||a,o=!1;s()&&a.ready(s,a,!0)},parseModel:function(e,i){var n=this,r=n.remoteLoaded||!n.loadRemote;if(!v(e))return r?null:!1;a(e)?e=new e.Model:s(e)&&(e=new e);var o=n.buildKeyFromInput(e);if(e instanceof n.model)return n.models.has(o)||n.models.put(o,e),e;if(n.models.has(o)){var d=n.models.get(o);return c(e)&&n.putRemoteData(e,o,d,i),d}return c(e)?i?n.putRemoteData(e,t,t,!0):n.instantiate(n.decode(e)):r?null:!1},removeKey:function(e){var t=this.key;if(l(t))for(var i=0;i<t.length;i++)delete e[t[i]];else delete e[t]},buildKey:function(e,t){var i=this.buildKeys(e,t);return l(i)&&(i=i.join(this.keySeparator)),i},buildKeys:function(e,t){var i=null;if(l(t)){i=[];for(var n=0;n<t.length;n++)i.push(e[t[n]])}else i=e[t],i||(i=e[t]=A());return i},buildKeyFromInput:function(e){return e instanceof this.model?e.$key():l(e)?this.buildKeyFromArray(e):c(e)?this.buildKey(e,this.key):e},buildKeyFromArray:function(e){return e.join(this.keySeparator)},getKey:function(e){return this.buildKey(e,this.key)},getKeys:function(e){return this.buildKeys(e,this.key)},buildObjectFromKey:function(e){var t=this,i={};if(l(t.key)){r(e)&&(e=e.split(t.keySeparator));for(var n=0;n<t.key.length;n++)i[t.key[n]]=e[n]}else i[t.key]=e;return t.instantiate(i)},hasFields:function(e,t,i){if(l(t)){for(var n=0;n<t.length;n++)if(!i(e[t[n]]))return!1;return!0}return i(e[t])},updated:function(){this.sort(),this.trigger(G.Events.Updated)},setRevision:function(e){n(e)?this.revisionFunction=e:r(e)?this.revisionFunction=function(t,i){return e in t&&e in i?U(t[e],i[e]):!1}:this.revisionFunction=function(e,t){return!1}},setComparator:function(e,t){this.comparatorFunction=F(e,t)},setToString:function(e){n(e)?this.toString=e:r(e)?this.toString=function(t){return v(t)?t[e]:t}:this.toString=function(e){return e.$key()}},sort:function(){this.isSorted()||this.models.sort(this.comparatorFunction)},isSorted:function(){return this.models.isSorted(this.comparatorFunction)},putRemoteData:function(e,t,i,n){var s=this,t=t||s.getKey(e),i=i||s.models.get(t),a=s.decode(L(e));if(i){var r=this.revisionFunction(i,e);if(r!==!1&&r>0)return B.debug(B.Debugs.SAVE_OLD_REVISION,s,i,e),i}if(i&&i.$saved){var o=i.$toJSON(!0),d={},u=!1,h={},l=k(i.$saved),c=s.relations;for(var f in e)if("$"!==f.charAt(0))if(f in c)i.$set(f,e[f]);else{var v=o[f],g=i.$saved[f];l||C(v,g)?(i[f]=a[f],h[f]=e[f],i.$local&&(i.$local[f]=e[f])):(d[f]=e[f],u=!0),i.$saved[f]=L(e[f])}u?i.$trigger(x.Events.PartialUpdate,[e,d]):i.$trigger(x.Events.FullUpdate,[e,h]),i.$trigger(x.Events.RemoteUpdate,[e]),i.$addOperation(te)}else i=s.instantiate(a,n),s.cache===B.Cache.All?(i.$local=e,i.$saved=i.$local.$saved=L(e),i.$addOperation(te)):i.$saved=D(e);return s.models.has(t)||(s.models.put(t,i),s.trigger(G.Events.ModelAdded,[i]),n||i.$trigger(x.Events.Saved)),i},destroyLocalUncachedModel:function(e,t){var i=this;return e?e.$hasChanges()?(delete e.$saved,i.removeKey(e),e.$trigger(x.Events.Detach),!1):(i.models.remove(t),i.trigger(G.Events.ModelRemoved,[e]),e.$trigger(x.Events.RemoteAndRemove),B.debug(B.Debugs.REMOTE_REMOVE,i,e),!0):!1},destroyLocalCachedModel:function(e,t){var i=this;return e?e.$hasChanges()?(delete e.$saved,delete e.$local.$saved,i.removeKey(e),i.removeKey(e.$local),e.$trigger(x.Events.Detach),e.$addOperation(te),!1):(e.$addOperation(W),i.models.remove(t),i.trigger(G.Events.ModelRemoved,[e]),e.$trigger(x.Events.RemoteAndRemove),B.debug(B.Debugs.REMOTE_REMOVE,i,e),!0):(i.store.remove(t,function(e){e&&B.debug(B.Debugs.REMOTE_REMOVE,i,e)}),!1)},destroyLocalModel:function(e){var t=this,i=t.models.get(e);return t.cache===B.Cache.All?t.destroyLocalCachedModel(i,e):t.destroyLocalUncachedModel(i,e)},init:function(){function e(e,t){B.debug(B.Debugs.LOCAL_LOAD,i,e),i.models.reset();for(var n=0;n<e.length;n++){var s=e[n],a=t[n],r=i.decode(L(s,!0)),o=i.instantiate(r,!0);o.$local=s,s.$deleted?(B.debug(B.Debugs.LOCAL_RESUME_DELETE,i,o),o.$addOperation(X)):(s.$saved?(B.debug(B.Debugs.LOCAL_LOAD_SAVED,i,o),o.$local.$saved=o.$saved):(B.debug(B.Debugs.LOCAL_RESUME_SAVE,i,o),o.$addOperation(ie)),a===o.$key()?i.models.put(a,o):i.store.remove(a))}i.initialized=!0,i.localLoaded=!0,i.trigger(G.Events.LocalLoad,[i]),i.updated(),i.loadRemote&&i.refresh()}function t(){i.initialized=!0,i.loadRemote?i.refresh():i.trigger(G.Events.NoLoad,[i])}var i=this;return i.loadRemote&&i.autoRefresh&&B.after("online",i.onOnline,i),i.cache===B.Cache.None?void(i.loadRemote?i.refresh():(i.initialized=!0,i.trigger(G.Events.NoLoad,[i]))):void i.store.all(e,t)},onOnline:function(){this.afterOnline=!0,0===this.remoteOperations&&this.onRemoteRest()},onRemoteRest:function(){var e=this;e.autoRefresh&&e.remoteLoaded&&e.afterOnline&&(e.afterOnline=!1,B.debug(B.Debugs.AUTO_REFRESH,e),e.refresh())},refresh:function(){function e(e){for(var t={},n=0;n<e.length;n++){var s=i.putRemoteData(e[n]);if(s){var a=s.$key();t[a]=s}}for(var r=i.models.keys,n=0;n<r.length;n++){var o=r[n];if(!(o in t)){var d=i.models.get(o);d.$saved&&(B.debug(B.Debugs.REMOTE_LOAD_REMOVE,i,o),i.destroyLocalModel(o))}}i.initialized=!0,i.remoteLoaded=!0,i.trigger(G.Events.RemoteLoad,[i]),i.updated(),B.debug(B.Debugs.REMOTE_LOAD,i,e)}function t(e,t){0===t?(B.checkNetworkStatus(),B.online||(i.pendingRefresh=!0,B.once("online",i.onRefreshOnline,i)),B.debug(B.Debugs.REMOTE_LOAD_OFFLINE,i)):(B.debug(B.Debugs.REMOTE_LOAD_ERROR,i,t),i.initialized=!0,i.trigger(G.Events.NoLoad,[i]))}var i=this;i.rest.all(e,t)},onRefreshOnline:function(){var e=this;B.debug(B.Debugs.REMOTE_LOAD_RESUME,e),e.pendingRefresh&&(e.pendingRefresh=!1,e.refresh())},getModels:function(){return this.models.values},getModel:function(e){return l(e)&&(e=this.buildKeyFromArray(e)),this.models.get(e)},handlePublish:function(e){return function(t){var i=t.key,n=t.model;switch(t.op){case G.Live.Save:e.putRemoteData(n,i),e.updated(),B.debug(B.Debugs.REALTIME_SAVE,e,t.model,i);break;case G.Live.Remove:e.destroyLocalModel(i)&&e.updated(),B.debug(B.Debugs.REALTIME_REMOVE,e,i)}}},instantiate:function(e,t){return new this.model(e,t)},create:function(e){var t=this;if(!c(e)){var i=t.instantiate();return i.$save(),i}var n=_(e,t.fields),i=t.instantiate(n),s=i.$key(),a={};t.models.put(s,i),t.trigger(G.Events.ModelAdded,[i]),t.updated();for(var r=0;r<t.relationNames.length;r++){var o=t.relationNames[r];o in e&&(a[o]=e[o])}return i.$save(a),i},save:function(e,t){var i=this,n=e.$key(),t=v(t)?t:B.Cascade.All;return e.$deleted?void B.debug(B.Debugs.SAVE_DELETED,i,e):(i.models.has(n)?(i.trigger(G.Events.ModelUpdated,[e]),e.$trigger(x.Events.UpdateAndSave)):(i.models.put(n,e),i.trigger(G.Events.ModelAdded,[e]),i.updated(),e.$trigger(x.Events.CreateAndSave)),void(t&&(i.cache!==B.Cache.None&&t&B.Cascade.Local?e.$addOperation(ee,t):e.$addOperation(ie,t))))},remove:function(e,t){var i=this,n=e.$key(),t=v(t)?t:B.Cascade.All;i.models.has(n)&&(i.models.remove(n),i.trigger(G.Events.ModelRemoved,[e]),i.updated(),e.$trigger(x.Events.Removed)),e.$deleted=!0,e.$pendingSave&&(B.debug(B.Debugs.REMOVE_CANCEL_SAVE,i,e),e.$pendingSave=!1),t&&(i.cache!==B.Cache.None&&t&B.Cascade.Local?e.$addOperation(Q,t):e.$addOperation(X,t))},refreshModel:function(e,t){var i=this,t=v(t)?t:B.Cascade.Rest;t&&(i.cache===B.Cache.All&&t&B.Cascade.Local?e.$addOperation(j,t):e.$addOperation(q,t))}},w(G.prototype),x.Events={Created:"created",Saved:"saved",PreSave:"pre-save",PostSave:"post-save",PreRemove:"pre-remove",PostRemove:"post-remove",PartialUpdate:"partial-update",FullUpdate:"full-update",Updated:"updated",Detach:"detach",Change:"change",CreateAndSave:"created saved",UpdateAndSave:"updated saved",KeyUpdate:"key-update",RelationUpdate:"relation-update",Removed:"removed",RemoteUpdate:"remote-update",RemoteRemove:"remote-remove",RemoteAndRemove:"remote-remove removed",SavedRemoteUpdate:"saved remote-update",Changes:"saved remote-update key-update relation-update removed change"},x.prototype={$init:function(e,t){if(this.$pendingSave=!1,this.$operation=null,this.$relations={},t?this.$set(e):this.$reset(e),this.$db.loadRelations){var i=this.$db.relations;for(var n in i)this.$getRelation(n)}Y(this,this.$db.modelEvents)},$reset:function(e){var i=this.$db.defaults,n=this.$db.fields,s=this.$db.relations;if(c(i)){for(var a=0;a<n.length;a++){var r=n[a],o=i[r],d=N(o);this[r]=d}for(var r in s)if(r in i){var o=i[r],d=N(o),u=this.$getRelation(r);u.set(this,d)}}else for(var a=0;a<n.length;a++){var r=n[a];this[r]=t}this.$set(e)},$set:function(e,t){if(c(e))for(var i in e)this.$set(i,e[i]);else if(r(e)){var n=this.$getRelation(e);n?n.set(this,t):this[e]=t}v(e)&&this.$trigger(x.Events.Change,[e,t])},$get:function(e,t){if(l(e))return _(this,e,t);if(c(e)){for(var i in e)e[i]=t?L(this[i]):this[i];return e}if(r(e)){var n=this.$getRelation(e);if(n){var s=n.get(this);return t?L(s):s}return t?L(this[e]):this[e]}},$relate:function(e,t){var i=this.$getRelation(e);i&&i.relate(this,t)},$unrelate:function(e,t){var i=this.$getRelation(e);i&&i.unrelate(this,t)},$isRelated:function(e,t){var i=this.$getRelation(e);return i&&i.isRelated(this,t)},$getRelation:function(e){var t=this.$db.relations;if(e in t){var i=t[e];return e in this.$relations||i.load(this),i}return!1},$save:function(e,t,i){var i=3===arguments.length&&o(i)?i:2===arguments.length&&c(e)&&o(t)?t:1===arguments.length&&o(e)?e:B.Cascade.All;this.$set(e,t),this.$trigger(x.Events.PreSave,[this]),this.$db.save(this,i),this.$trigger(x.Events.PostSave,[this])},$remove:function(e){this.$exists()&&(this.$trigger(x.Events.PreRemove,[this]),this.$db.remove(this,e),this.$trigger(x.Events.PostRemove,[this]))},$refresh:function(e){this.$db.refreshModel(this,e)},$exists:function(){return!this.$deleted&&this.$db.models.has(this.$key())},$addOperation:function(e,t){var i=new e(this,t);this.$operation?this.$operation.queue(i):(this.$operation=i,this.$operation.execute())},$toJSON:function(e){var t=this.$db.encode(_(this,this.$db.fields,!0)),i=this.$db.relations,n=this.$relations;for(var s in n)i[s].encode(this,t,e);return t},$change:function(){this.$trigger(x.Events.Change)},$key:function(){return this.$db.getKey(this)},$keys:function(){return this.$db.getKeys(this)},$hasKey:function(){return this.$db.hasFields(this,this.$db.key,v)},$isSaved:function(){return!!this.$saved},$isSavedLocally:function(){return!!this.$local},$isNew:function(){return!(this.$saved||this.$local)},$getChanges:function(e){var t=this.$saved,i=e||this.$toJSON(!0),n=this.$db.saveFields;return t?T(i,t,n,C):i},$hasChanges:function(){if(!this.$saved)return!0;var e=this.$toJSON(!0),t=this.$saved;for(var i in e){var n=e[i],s=t[i];if(!C(n,s))return!0}return!1},toString:function(){return this.$db.className+" "+JSON.stringify(this.$toJSON())}},w(x.prototype,!0),z.prototype={reset:function(){return this.values.length=0,this.keys.length=0,this.indices={},this},put:function(e,t){return e in this.indices?this.values[this.indices[e]]=t:(this.indices[e]=this.values.length,this.values.push(t),this.keys.push(e)),this},get:function(e){return this.values[this.indices[e]]},remove:function(e){var t=this.indices[e];return o(t)&&this.removeAt(t),this},removeAt:function(e){var t=this.keys[e],i=this.values.pop(),n=this.keys.pop();return e<this.values.length&&(this.values[e]=i,this.keys[e]=n,this.indices[n]=e),delete this.indices[t],this},has:function(e){return e in this.indices},size:function(){return this.values.length},subtract:function(e,t){for(var i=t||new z,n=this.size(),s=this.values,a=this.keys,r=0;n>r;r++){var o=s[r],d=a[r];e.has(d)||i.put(d,o)}return i},filter:function(e,t){for(var i=t||new z,n=this.size(),s=this.values,a=this.keys,r=0;n>r;r++){var o=s[r],d=a[r];e(o,d)&&i.put(d,o)}return i},reverse:function(){for(var e=this.size()-1,t=Math.ceil(e/2),i=0;t>i;i++)$(this.values,i,e-i),$(this.keys,i,e-i);return this.rebuildIndex(),this},isSorted:function(e){if(!e)return!0;for(var t=this.values,i=0,n=t.length-1;n>i;i++)if(e(t[i],t[i+1])>0)return!1;return!0},sort:function(e){function t(t,i){for(var s=n.values[Math.floor((i+t)/2)],a=t,r=i;r>=a;){for(;e(n.values[a],s)<0;)a++;for(;e(n.values[r],s)>0;)r--;r>=a&&($(n.values,a,r),$(n.keys,a,r),a++,r--)}return a}function i(e,n){var s=t(e,n);s-1>e&&i(e,s-1),n>s&&i(s,n)}var n=this,s=this.size()-1;return s>0&&(i(0,s),this.rebuildIndex()),this},rebuildIndex:function(){this.indices={};for(var e=0,t=this.keys.length;t>e;e++)this.indices[this.keys[e]]=e;return this}},B.Cascade={None:0,Local:1,Rest:2,Live:4,Remote:6,All:7},J.prototype={reset:function(e,t){this.model=e,this.cascade=v(t)?t:B.Cascade.All,this.db=e.$db,this.next=null,this.finished=!1},canCascade:function(e){return!!(this.cascade&e)},queue:function(e){this.next&&!e.interrupts?this.next.queue(e):this.next=e},execute:function(){this.db.remoteOperations++,this.run(this.db,this.model)},run:function(e,t){throw"NeuroOperation.run Not implemented"},finish:function(){return this.finished||(this.finished=!0,(this.model.$operation=this.next)&&this.next.execute(),this.db.remoteOperations--,0===this.db.remoteOperations&&this.db.onRemoteRest()),this},tryNext:function(e,t){this.next||(this.next=new e(this.model,t))},insertNext:function(e,t){var i=new e(this.model,t);i.next=this.next,this.next=i},success:function(){var e=this;return function(){e.onSuccess.apply(e,arguments),e.finish()}},onSuccess:function(){},failure:function(){var e=this;return function(){e.onFailure.apply(e,arguments),e.finish()}},onFailure:function(){}},p(new J(!1,"NeuroGetLocal"),j,{run:function(e,t){e.cache===B.Cache.All&&this.canCascade(B.Cascade.Local)?e.store.get(t.$key(),this.success(),this.failure()):this.canCascade(B.Cascade.Rest)&&(B.debug(B.Debugs.GET_LOCAL_SKIPPED,t),this.insertNext(q,this.cascade))},onSuccess:function(e,t){var i=this.model;c(t)&&i.$set(t),B.debug(B.Debugs.GET_LOCAL,i,t),this.canCascade(B.Cascade.Rest)&&this.insertNext(q,this.cascade)},onFailure:function(e){var t=this.model;B.debug(B.Debugs.GET_LOCAL,t,e),this.canCascade(B.Cascade.Rest)&&this.insertNext(q,this.cascade)}}),p(new J(!1,"NeuroGetRemote"),q,{run:function(e,t){e.rest.get(t,this.success(),this.failure())},onSuccess:function(e){var t=this.model;c(e)&&t.$set(e),B.debug(B.Debugs.GET_REMOTE,t,e)},onFailure:function(e,t){var i=this.model;B.debug(B.Debugs.GET_REMOTE_ERROR,i,e,t)}}),p(new J(!0,"NeuroRemoveCache"),Z,{run:function(e,t){t.$pendingSave=!1,e.cache==B.Cache.None?this.finish():e.store.remove(t.$key(),this.success(),this.failure())}}),p(new J(!0,"NeuroRemoveLocal"),Q,{run:function(e,t){var i=t.$key();return t.$local?void(t.$saved?(t.$local.$deleted=!0,e.store.put(i,t.$local,this.success(),this.failure())):(B.debug(B.Debugs.REMOVE_LOCAL_UNSAVED,t),e.store.remove(i,this.success(),this.failure()))):(B.debug(B.Debugs.REMOVE_LOCAL_NONE,t),this.finish())},onSuccess:function(e,t,i){var n=this.model;B.debug(B.Debugs.REMOVE_LOCAL,n),n.$saved&&this.canCascade(B.Cascade.Rest)&&n.$addOperation(X,this.cascade)},onFailure:function(e){var t=this.model;B.debug(B.Debugs.REMOVE_LOCAL_ERROR,t,e),t.$saved&&this.canCascade(B.Cascade.Rest)&&t.$addOperation(X,this.cascade)}}),p(new J(!0,"NeuroRemoveNow"),W,{run:function(e,t){var i=t.$key();t.$deleted=!0,t.$pendingSave=!1,e.models.has(i)&&(e.models.remove(i),e.trigger(G.Events.ModelRemoved,[t]),e.updated(),t.$trigger(x.Events.Removed)),e.cache===B.Cache.None?this.finish():e.store.remove(i,this.success(),this.failure())}}),p(new J(!0,"NeuroRemoveRemote"),X,{run:function(e,t){t.$pendingSave=!1,t.$deleted=!0,this.key=t.$key(),e.rest.remove(t,this.success(),this.failure())},onSuccess:function(e){this.finishRemove()},onFailure:function(e,t){var i=this.key,n=this.model;404===t||410===t?(B.debug(B.Debugs.REMOVE_MISSING,n,i),this.finishRemove()):0!==t?B.debug(B.Debugs.REMOVE_ERROR,n,t,i):(B.checkNetworkStatus(),B.online||B.once("online",this.handleOnline,this),B.debug(B.Debugs.REMOVE_OFFLINE,n))},finishRemove:function(){var e=this.db,t=this.key,i=this.model;B.debug(B.Debugs.REMOVE_REMOTE,i,t),this.insertNext(W),this.canCascade(B.Cascade.Live)&&(B.debug(B.Debugs.REMOVE_PUBLISH,i,t),e.live({op:G.Live.Remove,key:t}))},handleOnline:function(){var e=this.model;B.debug(B.Debugs.REMOVE_RESUME,e),e.$addOperation(X,this.cascade)}}),p(new J(!1,"NeuroSaveLocal"),ee,{run:function(e,t){if(t.$deleted)return B.debug(B.Debugs.SAVE_LOCAL_DELETED,t),this.finish();var i=t.$key(),n=t.$toJSON(!1);t.$local?S(n,t.$local):(t.$local=n,t.$saved&&(t.$local.$saved=t.$saved)),e.store.put(i,t.$local,this.success(),this.failure())},onSuccess:function(e,t,i){var n=(this.db,this.model);B.debug(B.Debugs.SAVE_LOCAL,n),this.canCascade(B.Cascade.Rest)&&this.tryNext(ie,this.cascade)},onFailure:function(e){var t=this.model;B.debug(B.Debugs.SAVE_LOCAL_ERROR,t,e),this.canCascade(B.Cascade.Rest)&&this.tryNext(ie,this.cascade)}}),p(new J(!1,"NeuroSaveNow"),te,{run:function(e,t){e.cache!==B.Cache.All?this.finish():e.store.put(t.$key(),t.$local,this.success(),this.failure())}}),p(new J(!1,"NeuroSaveRemote"),ie,{run:function(e,t){if(t.$deleted)return B.debug(B.Debugs.SAVE_REMOTE_DELETED,t),this.finish();var i=(this.key=t.$key(),this.encoded=t.$toJSON(!0)),n=this.changes=t.$getChanges(i),s=this.saving=e.fullSave?i:n;this.publishing=e.fullPublish?i:n;return k(n)?this.finish():void(t.$saved?e.rest.update(t,s,this.success(),this.failure()):e.rest.create(t,s,this.success(),this.failure()))},onSuccess:function(e){var t=this.model;B.debug(B.Debugs.SAVE_REMOTE,t),this.handleData(e)},onFailure:function(e,t){var i=(this.db,this.model);409===t?(B.debug(B.Debugs.SAVE_CONFLICT,i,e),this.handleData(e,i,this.db)):410===t||404===t?(B.debug(B.Debugs.SAVE_UPDATE_FAIL,i),this.insertNext(W)):0!==t?B.debug(B.Debugs.SAVE_ERROR,i,t):(B.checkNetworkStatus(),B.online||(i.$pendingSave=!0,B.once("online",this.handleOnline,this)),B.debug(B.Debugs.SAVE_OFFLINE,i))},handleData:function(e){var t=this.db,i=this.model,n=this.saving,s=this.publishing;return i.$deleted?void B.debug(B.Debugs.SAVE_REMOTE_DELETED,i,e):(k(e)||S(e,n),B.debug(B.Debugs.SAVE_VALUES,i,n),i.$saved||(i.$local?i.$saved=i.$local.$saved={}:i.$saved={}),t.putRemoteData(n,this.key,i),this.canCascade(B.Cascade.Live)&&(B.debug(B.Debugs.SAVE_PUBLISH,i,s),t.live({op:G.Live.Save,model:s,key:this.key})),void(t.cache===B.Cache.Pending&&this.insertNext(Z)))},handleOnline:function(){var e=this.model;e.$pendingSave&&(e.$pendingSave=!1,e.$addOperation(ie,this.cascade),B.debug(B.Debugs.SAVE_RESUME,e))}}),B.Relations={},B.Store={None:0,Model:1,Key:2,Keys:3},B.Save={None:0,Model:4},ne.Defaults={model:t,store:B.Store.None,save:B.Save.None,auto:!0,property:!0},ne.prototype={getDefaults:function(e,t,i){return ne.Defaults},init:function(e,t,i){b(this,i,this.getDefaults(e,t,i)),this.database=e,this.name=t,this.options=i,this.pendingLoads=[],this.initialized=!1,this.discriminator=i.discriminator||"discriminator",this.discriminators=i.discriminators||{},this.discriminated=!!i.discriminators;var n=this.setNeuro(e,t,i);a(i.model)?n.call(this,i.model):B.get(i.model,n,this)},setNeuro:function(e,t,i){return function(n){this.model=n,this.property||(this.property=g(e.fields,this.name)!==!1),this.discriminated&&this.loadDiscriminators(),this.onInitialized(e,t,i)}},onInitialized:function(e,t,i){},finishInitialization:function(){this.initialized=!0;for(var e=this.pendingLoads,t=0;t<e.length;t++)this.handleLoad(e[t]);e.length=0},load:function(e){this.initialized?this.handleLoad(e):this.pendingLoads.push(e)},handleLoad:function(e){},
relate:function(e,t){},unrelate:function(e,t){},isRelated:function(e,t){},get:function(e){},set:function(e,t){this.unrelate(e),this.relate(e,t)},encode:function(e,t,i){},isModelArray:function(e){if(!l(e))return!1;var t=this.model.Database,i=t.key;if(!l(i))return!0;if(i.length!==e.length)return!0;for(var n=0;n<e.length;n++)if(!o(e[n])&&!r(e[n]))return!0;return!1},clearFields:function(e,t){var i=!1;if(r(t))e[t]&&(e[t]=null,i=!0);else for(var n=0;n<t.length;n++){var s=t[n];e[s]&&(e[s]=null,i=!0)}return i&&this.auto&&!e.$isNew()&&e.$save(),i},updateFields:function(e,t,i,n){var s=!1;if(i.$key(),r(t)){var a=e[t],o=i[n];C(a,o)||(e[t]=o,s=!0)}else for(var d=0;d<t.length;d++){var u=t[d],a=e[u],h=n[d],l=i[h];C(a,l)||(e[u]=L(l),s=!0)}return s&&(this.auto&&!e.$isNew()&&e.$save(),e.$trigger(x.Events.KeyUpdate,[e,i,t,n])),s},getStoredArray:function(e,t){if(!t)return null;for(var i=[],n=0;n<e.length;n++){var s=this.getStored(e[n],t);null!==s&&i.push(s)}return i},getStored:function(e,t){if(e)switch(t){case B.Save.Model:return e.$toJSON(!0);case B.Store.Model:if(e.$local)return e.$local;var i=e.$toJSON(!1);return e.$saved&&(i.$saved=e.$saved),i;case B.Store.Key:return e.$key();case B.Store.Keys:return e.$keys()}return null},loadDiscriminators:function(){for(var e in this.discriminators){var t=this.discriminators[e];B.get(t,this.setDiscriminated,this)}},setDiscriminated:function(e){return function(t){this.discriminators[e]=t}},getDiscriminator:function(e){return e[this.discriminator]},getDiscriminatorDatabase:function(e){var t=this.getDiscriminator(e);if(t in this.discriminators){var e=this.discriminators[t];return e.Database}return!1},parseDiscriminated:function(e){if(c(e)){var t=this.getDiscriminatorDatabase(e);return t.parseModel(e)}return!1},grabModel:function(e,t,i,n){if(this.discriminated){if(this.grabDiscriminated(i,n))return!0;this.getDiscriminatorByType(t)}},grabDiscriminated:function(e,t){if(c(e)){var i=this.getDiscriminatorDatabase(e);if(i!==!1)return i.grabModel(e,callack,this),!0}return!0},getDiscriminatorByType:function(e){for(var t in this.discriminators){var i=this.discriminators[t];if(e instanceof i)return t}return!1},loadAllRelated:function(e,t){if(this.discriminated)this.loadAllDiscriminated(e,t);else{var i=this.model.Database;i.ready(this.loadAllReady(e,t),this)}},loadAllReady:function(e,t){return function(i){var n=i.models.filter(e);t.call(this,n)}},loadAllDiscriminated:function(e,t){var i=new z,n=this,s=I(this.discriminators),a=0;for(var r in this.discriminators){var o=this.discriminators[r],d=o.Database;d.ready(function(r){r.models.filter(e,i),++a===s&&t.call(n,i)})}}},B.Relations.belongsTo=se,se.Defaults={model:t,store:B.Store.None,save:B.Save.None,auto:!0,property:!0,local:null,cascade:B.Cascade.All},p(new ne,se,{getDefaults:function(e,t,i){return se.Defaults},onInitialized:function(e,t,i){var n=this.model.Database;this.local=this.local||n.name+"_"+n.key,B.debug(B.Debugs.BELONGSTO_INIT,this),this.finishInitialization()},handleLoad:function(e){var t=this,i=this.isRelatedFactory(e),n=this.handleKeyUpdate(),s=this.model.Database,a=e[this.name],r=e.$relations[this.name]={parent:e,initial:a,isRelated:i,model:null,loaded:!1,onKeyUpdate:n,onRemoved:function(){B.debug(B.Debugs.BELONGSTO_NINJA_REMOVE,t,e,r),this.cascade?e.$remove(this.cascade):this.clearRelated(r)},onSaved:function(){B.debug(B.Debugs.BELONGSTO_NINJA_SAVE,t,e,r),i(r.model)||(this.cascade?e.$remove(this.cascade):this.clearRelated(r))}};e.$on(x.Events.KeyUpdate,r.onKeyUpdate,this),e.$on(x.Events.PostRemove,this.postRemove,this),k(a)&&s.hasFields(e,this.local,v)&&(a=y(e,this.local),B.debug(B.Debugs.BELONGSTO_INITIAL_PULLED,this,e,a)),k(a)||(B.debug(B.Debugs.BELONGSTO_INITIAL,this,e,a),s.grabModel(a,this.handleModel(r),this))},set:function(e,t){if(k(t))this.unrelate(e);else{var i=this.model.Database,n=i.parseModel(t),s=e.$relations[this.name];n&&!s.isRelated(n)&&(this.clearModel(s),this.setRelated(s,n))}},relate:function(e,t){var i=this.model.Database,n=i.parseModel(t),s=e.$relations[this.name];n&&s.model!==n&&(this.clearModel(s),this.setRelated(s,n))},unrelate:function(e,t){var i=this.model.Database,n=e.$relations[this.name],s=i.parseModel(t);s&&n.model!==s||this.clearRelated(n)},isRelated:function(e,t){var i=this.model.Database,n=e.$relations[this.name],s=i.parseModel(t);return s===n.model},setRelated:function(e,t){this.setModel(e,t),this.updateForeignKey(e.parent,t),this.setProperty(e)},clearRelated:function(e){this.clearModel(e),this.clearForeignKey(e.parent),this.setProperty(e)},get:function(e){var t=e.$relations[this.name];return t.model},encode:function(e,t,i){var n=e.$relations[this.name],s=i?this.save:this.store;n&&s&&(t[this.name]=this.getStored(n.model,s))},postRemove:function(e){var t=e.$relations[this.name];t&&(B.debug(B.Debugs.BELONGSTO_POSTREMOVE,this,e,t),this.clearModel(t),this.setProperty(t),e.$off(x.Events.KeyUpdate,t.onKeyUpdate))},clearModel:function(e){var t=e.model;t&&(B.debug(B.Debugs.BELONGSTO_CLEAR_MODEL,this,e),t.$off(x.Events.Saved,e.onSaved),t.$off(x.Events.Removed,e.onRemoved),e.model=null,e.loaded=!0)},setModel:function(e,t){t.$on(x.Events.Saved,e.onSaved,this),t.$on(x.Events.Removed,e.onRemoved,this),e.model=t,e.loaded=!0,B.debug(B.Debugs.BELONGSTO_SET_MODEL,this,e)},handleModel:function(e){return function(t){B.debug(B.Debugs.BELONGSTO_LOADED,this,e.parent,e,t),e.loaded===!1&&(t?(this.setModel(e,t),this.updateForeignKey(e.parent,t)):this.clearForeignKey(e.parent),e.loaded=!0,this.setProperty(e))}},isRelatedFactory:function(e){var t=this.model.Database,i=this.local,n=t.key;return function(t){return R(e,i,t,n)}},clearForeignKey:function(e){var t=this.local;B.debug(B.Debugs.BELONGSTO_CLEAR_KEY,this,e,t),this.clearFields(e,t)},updateForeignKey:function(e,t){var i=this.model.Database,n=this.local,s=i.key;B.debug(B.Debugs.BELONGSTO_UPDATE_KEY,this,e,n,t,s),this.updateFields(e,n,t,s)},setProperty:function(e){if(this.property){var t=e.parent,i=e.model;t[this.name]!==i&&(t[this.name]=i,t.$trigger(x.Events.RelationUpdate,[this,e]))}},handleKeyUpdate:function(){return function(e,t,i,n){if(this.local===i){var s=e.$relations[this.name];s&&t!==s.model&&(this.clearModel(s),this.setModel(s,t),this.setProperty(s))}}}}),B.Relations.hasMany=ae,ae.Defaults={model:t,store:B.Store.None,save:B.Save.None,auto:!0,property:!0,foreign:null,comparator:null,comparatorNullsFirst:!1,cascadeRemove:B.Cascade.All,cascadeSave:B.Cascade.All},p(new ne,ae,{getDefaults:function(e,t,i){return ae.Defaults},onInitialized:function(e,t,i){this.foreign=this.foreign||e.name+"_"+e.key,this.comparator=F(this.comparator,this.comparatorNullsFirst),this.clearKey=this.ownsForeignKey(),B.debug(B.Debugs.HASMANY_INIT,this),this.finishInitialization()},handleLoad:function(e){var t=this,i=this.model.Database,n=this.isRelatedFactory(e),s=e[this.name],a=e.$relations[this.name]={parent:e,isRelated:n,initial:s,pending:{},models:new z,saving:!1,delaySorting:!1,delaySaving:!1,onRemoved:function(){B.debug(B.Debugs.HASMANY_NINJA_REMOVE,t,e,this,a),t.removeModel(a,this,!0)},onSaved:function(){a.saving||(B.debug(B.Debugs.HASMANY_NINJA_SAVE,t,e,this,a),n(this)?(t.sort(a),t.checkSave(a)):t.removeModel(a,this))}};e.$key(),e.$on(x.Events.PostSave,this.postSave,this),e.$on(x.Events.PreRemove,this.preRemove,this),i.on(G.Events.ModelAdded,this.handleModelAdded(a),this);var r=a.models.values;if(r.set=function(i){t.set(e,i)},r.relate=function(i){t.relate(e,i)},r.unrelate=function(i){t.unrelate(e,i)},r.isRelated=function(i){return t.isRelated(e,i)},l(s)){B.debug(B.Debugs.HASMANY_INITIAL,this,e,a,s);for(var o=0;o<s.length;o++){var d=s[o],u=i.buildKeyFromInput(d);a.pending[u]=!0,i.grabModel(d,this.handleModel(a),this)}}else B.debug(B.Debugs.HASMANY_INITIAL_PULLED,this,e,a),i.ready(this.handleLazyLoad(a),this);this.setProperty(a)},bulk:function(e,t){e.delaySorting=!0,e.delaySaving=!0,t.apply(this),e.delaySorting=!1,e.delaySaving=!1,this.sort(e),this.checkSave(e)},set:function(e,t){if(k(t))this.unrelate(e);else{var i=this.model.Database,n=e.$relations[this.name],s=n.models,a=new z;if(this.isModelArray(t))for(var r=0;r<t.length;r++){var o=i.parseModel(t[r]);o&&a.put(o.$key(),o)}else{var o=i.parseModel(t);o&&a.put(o.$key(),o)}var d=s.subtract(a).values,u=a.subtract(s).values;this.bulk(n,function(){for(var e=0;e<u.length;e++)this.addModel(n,u[e]);for(var e=0;e<d.length;e++)this.removeModel(n,d[e])})}},relate:function(e,t){var i=this.model.Database,n=e.$relations[this.name];if(this.isModelArray(t))this.bulk(n,function(){for(var e=0;e<t.length;e++){var s=i.parseModel(t[e]);s&&this.addModel(n,s)}});else if(v(t)){var s=i.parseModel(t);s&&this.addModel(n,s)}},unrelate:function(e,t){var i=this.model.Database,n=e.$relations[this.name];if(this.isModelArray(t))this.bulk(n,function(){for(var e=0;e<t.length;e++){var s=i.parseModel(t[e]);s&&this.removeModel(n,s)}});else if(v(t)){var s=i.parseModel(t);s&&this.removeModel(n,s)}else for(var a=n.models.values,r=a.length-1;r>=0;r--)this.removeModel(n,a[r])},isRelated:function(e,t){var i=this.model.Database,n=e.$relations[this.name],s=n.models;if(this.isModelArray(t)){for(var a=0;a<t.length;a++){var r=i.parseModel(t[a]);if(r&&!s.has(r.$key()))return!1}return t.length>0}if(v(t)){var r=i.parseModel(t);return r&&s.has(r.$key())}return!1},get:function(e){var t=e.$relations[this.name];return t.models.values},encode:function(e,t,i){var n=e.$relations[this.name],s=i?this.save:this.store;n&&s&&(t[this.name]=this.getStoredArray(n.models.values,s))},postSave:function(e){var t=e.$relations[this.name];if(t&&this.cascadeSave){B.debug(B.Debugs.HASMANY_POSTSAVE,this,e,t),t.saving=!0,t.delaySaving=!0;for(var i=t.models.values,n=0;n<i.length;n++){var s=i[n];s.$hasChanges()&&s.$save(this.cascadeSave)}t.saving=!1,t.delaySaving=!1}},preRemove:function(e){var t=e.$relations[this.name];t&&this.cascadeRemove&&(B.debug(B.Debugs.HASMANY_PREREMOVE,this,e,t),this.bulk(t,function(){for(var e=t.models.values,i=0;i<e.length;i++){var n=e[i];n.$remove(this.cascadeRemove)}}))},checkSave:function(e){e.delaySaving||(this.store===B.Store.Model||this.save===B.Save.Model)&&(B.debug(B.Debugs.HASMANY_AUTO_SAVE,this,e),e.parent.$save())},handleModelAdded:function(e){return function(t){e.isRelated(t)&&(B.debug(B.Debugs.HASMANY_NINJA_ADD,this,e,t),this.addModel(e,t))}},handleModel:function(e){return function(t){var i=e.pending,n=t.$key();n in i&&(B.debug(B.Debugs.HASMANY_INITIAL_GRABBED,this,e,t),this.addModel(e,t,!0),delete i[n])}},handleLazyLoad:function(e){return function(t){var i=t.models.filter(e.isRelated),n=i.values;B.debug(B.Debugs.HASMANY_LAZY_LOAD,this,e,n),this.bulk(e,function(){for(var t=0;t<n.length;t++)this.addModel(e,n[t])})}},addModel:function(e,t,i){var n=e.models,s=t.$key(),a=!n.has(s);return a&&(B.debug(B.Debugs.HASMANY_ADD,this,e,t),n.put(s,t),t.$on(x.Events.Removed,e.onRemoved),t.$on(x.Events.SavedRemoteUpdate,e.onSaved),this.updateForeignKey(e.parent,t),this.sort(e),i||this.checkSave(e)),a},removeModel:function(e,t,i){var n=e.models,s=e.pending,a=t.$key();n.has(a)&&(B.debug(B.Debugs.HASMANY_REMOVE,this,e,t),n.remove(a),t.$off(x.Events.Removed,e.onRemoved),t.$off(x.Events.SavedRemoteUpdate,e.onSaved),!i&&this.cascadeRemove&&t.$remove(this.cascadeRemove),this.clearForeignKey(t),this.sort(e),this.checkSave(e)),delete s[a]},ownsForeignKey:function(){var e=this.foreign,t=this.model.Database.key;if(r(e))return l(t)?g(t,e)===!1:t!==e;if(l(t)){for(var i=0;i<e.length;i++)if(g(t,e[i])!==!1)return!1;return!0}return g(e,t)===!1},updateForeignKey:function(e,t){var i=this.foreign,n=e.$db.key;this.updateFields(t,i,e,n)},clearForeignKey:function(e){if(this.clearKey){var t=this.foreign;this.clearFields(e,t)}},isRelatedFactory:function(e){var t=this.foreign,i=e.$db.key;return function(n){return R(n,t,e,i)}},setProperty:function(e){this.property&&(e.parent[this.name]=e.models.values)},sort:function(e){var t=e.models;e.delaySorting||(t.isSorted(this.comparator)||(B.debug(B.Debugs.HASMANY_SORT,this,e),t.sort(this.comparator)),e.parent.$trigger(x.Events.RelationUpdate,[this,e]))}}),B.Relations.hasManyThrough=re,re.Defaults={model:t,store:B.Store.None,save:B.Save.None,auto:!0,property:!0,through:t,local:null,foreign:null,comparator:null,comparatorNullsFirst:!1,cascadeRemove:B.Cascade.All,cascadeSave:B.Cascade.None},p(new ne,re,{getDefaults:function(e,t,i){return re.Defaults},onInitialized:function(e,t,i){var n=this.model.Database;this.foreign=this.foreign||n.name+"_"+n.key,this.local=this.local||e.name+"_"+e.key,this.comparator=F(this.comparator,this.comparatorNullsFirst),a(i.through)?this.setThrough(i.through):B.get(i.through,this.setThrough,this),B.debug(B.Debugs.HASMANYTHRU_INIT,this)},setThrough:function(e){this.through=e,this.finishInitialization()},handleLoad:function(e){var t=this,i=this.model.Database,n=this.through.Database,s=this.isRelatedFactory(e),a=e[this.name],r=e.$relations[this.name]={parent:e,isRelated:s,initial:a,pending:{},models:new z,throughs:new z,saving:!1,delaySorting:!1,delaySaving:!1,onRemoved:function(){B.debug(B.Debugs.HASMANYTHRU_NINJA_REMOVE,t,e,this,r),t.removeModel(r,this)},onSaved:function(){r.saving||(B.debug(B.Debugs.HASMANYTHRU_NINJA_SAVE,t,e,this,r),t.sort(r),t.checkSave(r))},onThroughRemoved:function(){B.debug(B.Debugs.HASMANYTHRU_NINJA_THRU_REMOVE,t,e,this,r),t.removeModelFromThrough(r,this)}};e.$key(),e.$on(x.Events.PostSave,this.postSave,this),e.$on(x.Events.PreRemove,this.preRemove,this),n.on(G.Events.ModelAdded,this.handleModelAdded(r),this);var o=r.models.values;if(o.set=function(i){t.set(e,i)},o.relate=function(i){t.relate(e,i)},o.unrelate=function(i){t.unrelate(e,i)},o.isRelated=function(i){return t.isRelated(e,i)},l(a)){B.debug(B.Debugs.HASMANYTHRU_INITIAL,this,e,r,a);for(var d=0;d<a.length;d++){var u=a[d],h=i.buildKeyFromInput(u);r.pending[h]=!0,i.grabModel(u,this.handleModel(r),this)}}else B.debug(B.Debugs.HASMANYTHRU_INITIAL_PULLED,this,e,r),n.ready(this.handleLazyLoad(r),this);this.setProperty(r)},bulk:function(e,t){e.delaySorting=!0,e.delaySaving=!0,t.apply(this),e.delaySorting=!1,e.delaySaving=!1,this.sort(e),this.checkSave(e)},set:function(e,t){if(k(t))this.unrelate(e);else{var i=this.model.Database,n=e.$relations[this.name],s=n.models,a=new z;if(this.isModelArray(t))for(var r=0;r<t.length;r++){var o=i.parseModel(t[r]);o&&a.put(o.$key(),o)}else{var o=i.parseModel(t);o&&a.put(o.$key(),o)}var d=s.subtract(a).values,u=a.subtract(s).values;this.bulk(n,function(){for(var e=0;e<u.length;e++)this.addModel(n,u[e]);for(var e=0;e<d.length;e++)this.removeModel(n,d[e])})}},relate:function(e,t){var i=this.model.Database,n=e.$relations[this.name];if(this.isModelArray(t))this.bulk(n,function(){for(var e=0;e<t.length;e++){var s=i.parseModel(t[e]);s&&this.addModel(n,s)}});else if(v(t)){var s=i.parseModel(t);s&&this.addModel(n,s)}},unrelate:function(e,t){var i=this.model.Database,n=e.$relations[this.name];if(this.isModelArray(t))this.bulk(n,function(){for(var e=0;e<t.length;e++){var s=i.parseModel(t[e]);s&&this.removeModel(n,s)}});else if(v(t)){var s=i.parseModel(t);s&&this.removeModel(n,s)}else for(var a=n.models.values,r=a.length-1;r>=0;r--)this.removeModel(n,a[r])},isRelated:function(e,t){var i=this.model.Database,n=e.$relations[this.name],s=n.models;if(this.isModelArray(t)){for(var a=0;a<t.length;a++){var r=i.parseModel(t[a]);if(r&&!s.has(r.$key()))return!1}return t.length>0}if(v(t)){var r=i.parseModel(t);return r&&s.has(r.$key())}return!1},get:function(e){var t=e.$relations[this.name];return t.models.values},encode:function(e,t,i){var n=e.$relations[this.name],s=i?this.save:this.store;n&&s&&(t[this.name]=this.getStoredArray(n.models.values,s))},postSave:function(e){var t=e.$relations[this.name];if(t&&this.cascadeSave){B.debug(B.Debugs.HASMANYTHRU_PRESAVE,this,e,t),t.saving=!0,t.delaySaving=!0;for(var i=t.models.values,n=0;n<i.length;n++){var s=i[n];s.$hasChanges()&&s.$save(this.cascadeSave)}t.saving=!1,t.delaySaving=!1}},preRemove:function(e){var t=e.$relations[this.name];t&&this.cascadeRemove&&(B.debug(B.Debugs.HASMANYTHRU_PREREMOVE,this,e,t),this.bulk(t,function(){for(var e=t.throughs.values,i=0;i<e.length;i++){var n=e[i];n.$remove(this.cascadeRemove)}}))},checkSave:function(e){e.delaySaving||(this.store===B.Store.Model||this.save===B.Save.Model)&&(B.debug(B.Debugs.HASMANYTHRU_AUTO_SAVE,this,e),e.parent.$save())},handleModelAdded:function(e){return function(t){e.isRelated(t)&&!e.throughs.has(t.$key())&&(B.debug(B.Debugs.HASMANYTHRU_NINJA_ADD,this,e,t),this.addModelFromThrough(e,t))}},handleModel:function(e){return function(t){var i=e.pending,n=t.$key();n in i&&(B.debug(B.Debugs.HASMANYTHRU_INITIAL_GRABBED,this,e,t),this.addModel(e,t,!0),delete i[n])}},handleLazyLoad:function(e){return function(t){var i=t.models,n=i.filter(e.isRelated),s=n.values;0!==s.length&&(B.debug(B.Debugs.HASMANYTHRU_LAZY_LOAD,this,e,s),this.bulk(e,function(){for(var t=0;t<s.length;t++)this.addModelFromThrough(e,s[t])}))}},addModel:function(e,t,i){var n=this.finishAddModel(e,t,i);return n&&this.addThrough(e,t),n},addThrough:function(e,t){var i=this.through.Database,n=this.createThroughKey(e,t);i.grabModel(n,this.onAddThrough(e),this,!1)},onAddThrough:function(e){return function(t){this.finishAddThrough(e,t,!0)}},addModelFromThrough:function(e,t){var i=this.model.Database,n=i.buildKey(t,this.foreign);i.grabModel(n,this.onAddModelFromThrough(e,t),this)},onAddModelFromThrough:function(e,t){return function(i){i&&(this.finishAddThrough(e,t),this.finishAddModel(e,i))}},finishAddThrough:function(e,t,i){var n=e.throughs,s=t.$key();n.has(s)||(B.debug(B.Debugs.HASMANYTHRU_THRU_ADD,this,e,t),n.put(s,t),t.$on(x.Events.Removed,e.onThroughRemoved),i&&t.$save(this.cascadeSave))},finishAddModel:function(e,t,i){var n=e.models,s=t.$key(),a=!n.has(s);return a&&(B.debug(B.Debugs.HASMANYTHRU_ADD,this,e,t),n.put(s,t),t.$on(x.Events.Removed,e.onRemoved),t.$on(x.Events.SavedRemoteUpdate,e.onSaved),this.sort(e),i||this.checkSave(e)),a},removeModel:function(e,t,i){var n=t.$key();this.finishRemoveRelated(e,n)&&this.removeThrough(e,t,i)},removeThrough:function(e,t,i){var n=this.through.Database,s=this.createThroughKey(e,t),a=n.getKey(s),r=e.throughs,o=r.get(a);this.finishRemoveThrough(e,o,t,!0)},removeModelFromThrough:function(e,t){var i=this.model.Database,n=i.buildKey(t,this.foreign);this.finishRemoveThrough(e,t)&&this.finishRemoveRelated(e,n)},finishRemoveThrough:function(e,t,i,n){var s=!!t;if(s){B.debug(B.Debugs.HASMANYTHRU_THRU_REMOVE,this,e,t,i);var a=e.throughs,r=t.$key();t.$off(x.Events.Removed,e.onThroughRemoved),n&&t.$remove(this.cascadeRemove),a.remove(r)}return s},finishRemoveRelated:function(e,t){var i=e.pending,n=e.models,s=n.get(t);return s&&(B.debug(B.Debugs.HASMANYTHRU_REMOVE,this,e,s),n.remove(t),s.$off(x.Events.Removed,e.onRemoved),s.$off(x.Events.SavedRemoteUpdate,e.onSaved),this.sort(e),this.checkSave(e)),delete i[t],s},isRelatedFactory:function(e){var t=e.$db.key,i=this.local;return function(n){return R(n,i,e,t)}},setProperty:function(e){this.property&&(e.parent[this.name]=e.models.values)},sort:function(e){var t=e.models;e.delaySorting||(t.isSorted(this.comparator)||(B.debug(B.Debugs.HASMANYTHRU_SORT,this,e),t.sort(this.comparator)),e.parent.$trigger(x.Events.RelationUpdate,[this,e]))},createThroughKey:function(e,t){for(var i=e.parent,n=i.$db,s=this.model.Database,a=this.through.Database,r=a.key,o={},d=0;d<r.length;d++){var u=r[d];if(u===this.foreign)o[u]=t.$key();else if(u===this.local)o[u]=i.$key();else if(l(this.foreign)){var h=g(this.foreign,u),c=s.key[h];o[u]=t[c]}else if(l(this.local)){var h=g(this.local,u),c=n.key[h];o[u]=i[c]}}return o}}),B.Relations.hasOne=oe,oe.Defaults={model:t,store:B.Store.None,save:B.Save.None,auto:!0,property:!0,local:null,cascade:B.Cascade.None},p(new ne,oe,{getDefaults:function(e,t,i){return oe.Defaults},onInitialized:function(e,t,i){var n=this.model.Database;this.local=this.local||n.name+"_"+n.key,B.debug(B.Debugs.HASONE_INIT,this),this.finishInitialization()},handleLoad:function(e){var t=this,i=this.isRelatedFactory(e),n=this.model.Database,s=e[this.name],a=e.$relations[this.name]={parent:e,initial:s,isRelated:i,model:null,loaded:!1,dirty:!1,saving:!1,onRemoved:function(){B.debug(B.Debugs.HASONE_NINJA_REMOVE,t,e,a),this.clearRelated(a,!0)},onSaved:function(){a.saving||(B.debug(B.Debugs.HASONE_NINJA_SAVE,t,e,a),i(a.model)||this.clearRelated(a))}};e.$on(x.Events.PreSave,this.preSave,this),e.$on(x.Events.PostRemove,this.postRemove,this),k(s)&&n.hasFields(e,this.local,v)&&(s=y(e,this.local),B.debug(B.Debugs.HASONE_INITIAL_PULLED,this,e,s)),k(s)||(B.debug(B.Debugs.HASONE_INITIAL,this,e,s),n.grabModel(s,this.handleModel(a),this))},set:function(e,t){if(k(t))this.unrelate(e);else{var i=this.model.Database,n=i.parseModel(t),s=e.$relations[this.name];n&&!s.isRelated(n)&&(this.clearModel(s),this.setRelated(s,n))}},relate:function(e,t){var i=this.model.Database,n=i.parseModel(t),s=e.$relations[this.name];n&&s.model!==n&&(this.clearModel(s),this.setRelated(s,n))},unrelate:function(e,t){var i=this.model.Database,n=e.$relations[this.name],s=i.parseModel(t);s&&n.model!==s||this.clearRelated(n)},isRelated:function(e,t){var i=this.model.Database,n=e.$relations[this.name],s=i.parseModel(t);return s===n.model},get:function(e){var t=e.$relations[this.name];return t.model},encode:function(e,t,i){var n=e.$relations[this.name],s=i?this.save:this.store;n&&s&&(t[this.name]=this.getStored(n.model,s))},preSave:function(e){var t=e.$relations[this.name];if(t&&t.model){var i=t.model;!t.isRelated(i),(t.dirty||i.$hasChanges())&&(B.debug(B.Debugs.HASONE_PRESAVE,this,e,t),t.saving=!0,i.$save(),t.saving=!1,t.dirty=!1)}},postRemove:function(e){var t=e.$relations[this.name];t&&this.cascade&&(B.debug(B.Debugs.HASONE_POSTREMOVE,this,e,t),this.clearModel(t,!1,this.cascde))},setRelated:function(e,t){this.setModel(e,t),this.updateForeignKey(e.parent,t),this.setProperty(e)},clearRelated:function(e,t){this.clearModel(e,t),this.clearForeignKey(e.parent),this.setProperty(e)},clearModel:function(e,t,i){var n=e.model;n&&(B.debug(B.Debugs.HASONE_CLEAR_MODEL,this,e),n.$off(x.Events.Saved,e.onSaved),n.$off(x.Events.Removed,e.onRemoved),t||n.$remove(i),e.model=null,e.dirty=!0,e.loaded=!0)},setModel:function(e,t){t.$on(x.Events.Saved,e.onSaved,this),t.$on(x.Events.Removed,e.onRemoved,this),e.model=t,e.dirty=!0,e.loaded=!0,B.debug(B.Debugs.HASONE_SET_MODEL,this,e)},handleModel:function(e){return function(t){B.debug(B.Debugs.HASONE_LOADED,this,e.parent,e,t),e.loaded===!1&&(t?(this.setModel(e,t),this.updateForeignKey(e.parent,t)):this.clearForeignKey(e.parent),e.loaded=!0,this.setProperty(e))}},isRelatedFactory:function(e){var t=this.model.Database,i=this.local,n=t.key;return function(t){return R(e,i,t,n)}},clearForeignKey:function(e){var t=this.local;B.debug(B.Debugs.HASONE_CLEAR_KEY,this,e,t),this.clearFields(e,t)},updateForeignKey:function(e,t){var i=this.model.Database,n=this.local,s=i.key;B.debug(B.Debugs.HASONE_UPDATE_KEY,this,e,n,t,s),this.updateFields(e,n,t,s)},setProperty:function(e){if(this.property){var t=e.parent,i=e.model;t[this.name]!==i&&(t[this.name]=i,t.$trigger(x.Events.RelationUpdate,[this,e]))}}}),e.Neuro=B,e.Neuro.Model=x,e.Neuro.Database=G,e.Neuro.Relation=ne,e.Neuro.Operation=J,e.Neuro.Map=z,e.Neuro.uuid=A,e.Neuro.indexOf=g,e.Neuro.propsMatch=R,e.Neuro.extend=p,e.Neuro.transfer=S,e.Neuro.swap=$,e.Neuro.grab=_,e.Neuro.pull=y,e.Neuro.copy=L,e.Neuro.diff=T,e.Neuro.sizeof=I,e.Neuro.isEmpty=k,e.Neuro.compare=U,e.Neuro.equals=C,e.Neuro.equalsStrict=H,e.Neuro.createComparator=F}(window);
//# sourceMappingURL=neurosync.min.js.map
