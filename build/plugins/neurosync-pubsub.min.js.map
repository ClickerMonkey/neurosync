{"version":3,"sources":["neurosync-pubsub.js"],"names":["Neuro","live","get","url","cache","PubSub","LiveFactory","database","onPublish","publish","message","channel","pubsub","token","subscribe","debug","Events","PUBSUB_CREATED","onpublish"],"mappings":"AACAA,MAAAC,KAAA,WAIA,QAAAC,GAAAC,GAEA,MAAAA,KAAAC,GAAAA,EAAAD,GAAAC,EAAAD,GAAA,GAAAE,QAAAF,GAGA,QAAAG,GAAAC,EAAAC,GAcA,QAAAC,GAAAC,GAEAC,EAAAF,QAAAC,GAdA,IAAAH,EAAAK,SAAAL,EAAAI,UAAAJ,EAAAM,MAEA,MAAA,aAGA,IAAAD,GAAAV,EAAAK,EAAAK,QACAD,EAAAC,EAAAE,UAAAP,EAAAI,QAAAJ,EAAAM,MAcA,OAZAb,OAAAe,MAAAf,MAAAgB,OAAAC,eAAAL,GAEAD,EAAAO,UAAAV,EAOAC,EAAAG,OAAAA,EACAH,EAAAE,QAAAA,EAEAF,EA7BA,GAAAL,KAgCA,OAAAE","file":"neurosync-pubsub.min.js","sourcesContent":["\nNeuro.live = (function()\n{\n  var cache = {};\n\n  function get(url)\n  {\n    return url in cache ? cache[ url ] : ( cache[ url ] = new PubSub( url ) );\n  }\n\n  function LiveFactory(database, onPublish)\n  {\n    if ( !database.pubsub || !database.channel || !database.token )\n    {\n      return function() {};\n    }\n\n    var pubsub = get( database.pubsub );\n    var channel = pubsub.subscribe( database.channel, database.token );\n\n    Neuro.debug( Neuro.Events.PUBSUB_CREATED, pubsub );\n\n    channel.onpublish = onPublish;\n\n    function publish(message)\n    {\n      channel.publish( message );\n    };\n\n    publish.pubsub = pubsub;\n    publish.channel = channel;\n\n    return publish;\n  };\n\n  return LiveFactory;\n\n})();"],"sourceRoot":"/source/"}